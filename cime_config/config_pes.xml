<?xml version="1.0"?>

<config_pes version="2.0">

  <grid name="any">
    <mach name="any">
      <pes pesize="any" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>-3</ntasks_atm>
	  <ntasks_lnd>-1</ntasks_lnd>
	  <ntasks_rof>-1</ntasks_rof>
	  <ntasks_ice>-2</ntasks_ice>
	  <ntasks_ocn>-1</ntasks_ocn>
	  <ntasks_glc>-1</ntasks_glc>
	  <ntasks_wav>-1</ntasks_wav>
	  <ntasks_cpl>-3</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>-1</rootpe_ice>
	  <rootpe_ocn>-3</rootpe_ocn>
	  <rootpe_glc>0</rootpe_glc>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
    </mach>
  </grid>

  <grid name="a%ne30np4.pg3_l%ne30np4.pg3_oi%tx2_3v2">
    <mach name="derecho">
      <pes pesize="M" compset="CAM.*%MT.*MOM6(?!.*%MARBL-BIO)">
	<comment></comment>
	<ntasks>
	  <ntasks_atm>5400</ntasks_atm>
	  <ntasks_lnd>2456</ntasks_lnd>
	  <ntasks_rof>2456</ntasks_rof>
	  <ntasks_ice>2944</ntasks_ice>
	  <ntasks_ocn>680</ntasks_ocn>
	  <ntasks_glc>4</ntasks_glc>
	  <ntasks_wav>64</ntasks_wav>
	  <ntasks_cpl>5400</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>2944</rootpe_lnd>
	  <rootpe_rof>2944</rootpe_rof>
	  <rootpe_ice>0</rootpe_ice>
	  <rootpe_ocn>5400</rootpe_ocn>
	  <rootpe_glc>0</rootpe_glc>
	  <rootpe_wav>6080</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
<!--      <pes pesize="M" compset="CAM.*%MT.*MOM6%[^_]*MARBL-BIO">
	<comment></comment>
	<ntasks>
	  <ntasks_atm>5400</ntasks_atm>
	  <ntasks_lnd>1816</ntasks_lnd>
	  <ntasks_rof>1816</ntasks_rof>
	  <ntasks_ice>3584</ntasks_ice>
	  <ntasks_ocn>1768</ntasks_ocn>
	  <ntasks_glc>4</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>5400</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>3584</rootpe_lnd>
	  <rootpe_rof>3584</rootpe_rof>
	  <rootpe_ice>0</rootpe_ice>
	  <rootpe_ocn>5400</rootpe_ocn>
	  <rootpe_glc>0</rootpe_glc>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes> -->
      <pes pesize="XL" compset="CAM.*%LT.*MOM6(?!.*%MARBL-BIO)">
	<comment>18 ypd/ 8530 pe-hrs/simyr expected</comment>
  	<ntasks>
	  <ntasks_atm>5400</ntasks_atm>
	  <ntasks_lnd>2624</ntasks_lnd>
	  <ntasks_rof>2624</ntasks_rof>
	  <ntasks_ice>2776</ntasks_ice>
	  <ntasks_ocn>896</ntasks_ocn>
	  <ntasks_glc>104</ntasks_glc>
	  <ntasks_wav>104</ntasks_wav>
	  <ntasks_cpl>5400</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>2624</rootpe_ice>
	  <rootpe_ocn>5504</rootpe_ocn>
	  <rootpe_glc>5400</rootpe_glc>
	  <rootpe_wav>5400</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
    </mach>
  </grid>
  <grid name="a%ne30np4.pg3_l%ne30np4.pg3_oi%tx2_3v2">
    <mach name="derecho">
      <pes pesize="M" compset="CAM.*%MT.*MOM6%[^_]*MARBL-BIO">
	<comment></comment>
	<ntasks>
	  <ntasks_atm>5400</ntasks_atm>
	  <ntasks_lnd>1792</ntasks_lnd>
	  <ntasks_rof>1792</ntasks_rof>
	  <ntasks_ice>3608</ntasks_ice>
	  <ntasks_ocn>3300</ntasks_ocn>
	  <ntasks_glc>4</ntasks_glc>
	  <ntasks_wav>64</ntasks_wav>
	  <ntasks_cpl>5400</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>1792</rootpe_ice>
	  <rootpe_ocn>5404</rootpe_ocn>
	  <rootpe_glc>5400</rootpe_glc>
	  <rootpe_wav>5400</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
      <pes pesize="XL" compset="CAM.*%LT.*MOM6%[^_]*MARBL-BIO">
	<comment>20 ypd/ 10500 pe-hrs/simyr expected</comment>
	<ntasks>
	  <ntasks_atm>5400</ntasks_atm>
	  <ntasks_lnd>1792</ntasks_lnd>
	  <ntasks_rof>1792</ntasks_rof>
	  <ntasks_ice>3608</ntasks_ice>
	  <ntasks_ocn>3300</ntasks_ocn>
	  <ntasks_glc>4</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>5400</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>1792</rootpe_ice>
	  <rootpe_ocn>5404</rootpe_ocn>
	  <rootpe_glc>5400</rootpe_glc>
	  <rootpe_wav>5400</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
      <pes pesize="L" compset="CAM.*%LT.*MOM6(?!.*%MARBL-BIO)">
	<comment>13.9 ypd/ 5300 pe-hrs/simyr expected</comment>
	<ntasks>
	  <ntasks_atm>2700</ntasks_atm>
	  <ntasks_lnd>1280</ntasks_lnd>
	  <ntasks_rof>1280</ntasks_rof>
	  <ntasks_ice>1772</ntasks_ice>
	  <ntasks_ocn>640</ntasks_ocn>
	  <ntasks_glc>116</ntasks_glc>
	  <ntasks_wav>116</ntasks_wav>
	  <ntasks_cpl>2700</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>896</rootpe_rof>
	  <rootpe_ice>1280</rootpe_ice>
	  <rootpe_ocn>2816</rootpe_ocn>
	  <rootpe_glc>2700</rootpe_glc>
	  <rootpe_wav>2700</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
      <pes pesize="L" compset="CAM.*%LT.*MOM6%[^_]*MARBL-BIO">
	<comment>13.9 ypd/ 8000 pe-hrs/simyr expected</comment>
	<ntasks>
	  <ntasks_atm>2700</ntasks_atm>
	  <ntasks_lnd>896</ntasks_lnd>
	  <ntasks_rof>32</ntasks_rof>
	  <ntasks_ice>1772</ntasks_ice>
	  <ntasks_ocn>1908</ntasks_ocn>
	  <ntasks_glc>32</ntasks_glc>
	  <ntasks_wav>32</ntasks_wav>
	  <ntasks_cpl>2700</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>896</rootpe_rof>
	  <rootpe_ice>928</rootpe_ice>
	  <rootpe_ocn>2700</rootpe_ocn>
	  <rootpe_glc>896</rootpe_glc>
	  <rootpe_wav>896</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
      <pes pesize="M" compset="CAM.*%LT.*MOM6(?!.*%MARBL-BIO)">
	<comment>10 ypd/ 5500 pe-hrs/simyr expected</comment>
	<ntasks>
	  <ntasks_atm>1920</ntasks_atm>
	  <ntasks_lnd>1152</ntasks_lnd>
	  <ntasks_rof>512</ntasks_rof>
	  <ntasks_ice>768</ntasks_ice>
	  <ntasks_ocn>512</ntasks_ocn>
	  <ntasks_glc>64</ntasks_glc>
	  <ntasks_wav>64</ntasks_wav>
	  <ntasks_cpl>1920</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>1152</rootpe_ice>
	  <rootpe_ocn>1920</rootpe_ocn>
	  <rootpe_glc>2496</rootpe_glc>
	  <rootpe_wav>2432</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
      <pes pesize="M" compset="CAM.*%LT.*MOM6%[^_]*MARBL-BIO">
	<comment>10 ypd/ 7000 pe-hrs/simyr expected</comment>
	<ntasks>
	  <ntasks_atm>1920</ntasks_atm>
	  <ntasks_lnd>640</ntasks_lnd>
	  <ntasks_rof>512</ntasks_rof>
	  <ntasks_ice>1152</ntasks_ice>
	  <ntasks_ocn>1408</ntasks_ocn>
	  <ntasks_glc>64</ntasks_glc>
	  <ntasks_wav>64</ntasks_wav>
	  <ntasks_cpl>1920</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>704</rootpe_ice>
	  <rootpe_ocn>1920</rootpe_ocn>
	  <rootpe_glc>1856</rootpe_glc>
	  <rootpe_wav>1792</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
      <pes pesize="S" compset="CAM.*%LT.*MOM6(?!.*%MARBL-BIO)">
	<comment>2.9 ypd/ 4300 pe-hrs/simyr expected</comment>
	<ntasks>
	  <ntasks_atm>448</ntasks_atm>
	  <ntasks_lnd>208</ntasks_lnd>
	  <ntasks_rof>16</ntasks_rof>
	  <ntasks_ice>224</ntasks_ice>
	  <ntasks_ocn>64</ntasks_ocn>
	  <ntasks_glc>16</ntasks_glc>
	  <ntasks_wav>16</ntasks_wav>
	  <ntasks_cpl>448</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>16</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>224</rootpe_ice>
	  <rootpe_ocn>448</rootpe_ocn>
	  <rootpe_glc>0</rootpe_glc>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
      <pes pesize="S" compset="CAM.*%LT.*MOM6%[^_]*MARBL-BIO">
	<comment>2.9 ypd/ 6400 pe-hrs/simyr expected</comment>
	<ntasks>
	  <ntasks_atm>448</ntasks_atm>
	  <ntasks_lnd>208</ntasks_lnd>
	  <ntasks_rof>16</ntasks_rof>
	  <ntasks_ice>224</ntasks_ice>
	  <ntasks_ocn>320</ntasks_ocn>
	  <ntasks_glc>16</ntasks_glc>
	  <ntasks_wav>16</ntasks_wav>
	  <ntasks_cpl>448</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>16</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>224</rootpe_ice>
	  <rootpe_ocn>448</rootpe_ocn>
	  <rootpe_glc>0</rootpe_glc>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
    </mach>
  </grid>

  <!-- J compset (all active except data atmosphere)
       Laid out as follows:
       |LND|ICE|ATM|OCN|
       |ROF|
       |..CPL..|
       |......GLC......|
  -->
  <!-- Ideally, we wouldn't specify the atmosphere resolution here, because it
       is irrelevant. However, ConfigPES doesn't seem to match the grid properly
       unless the atmosphere resolution is specified. -->
  <overrides>
    <grid name="any" >
      <mach name="any" >
	<pes pesize="any" compset="SPCAM[SM]">
	  <nthrds>
	    <nthrds_atm>1</nthrds_atm>
	    <nthrds_lnd>1</nthrds_lnd>
	    <nthrds_rof>1</nthrds_rof>
	    <nthrds_ice>1</nthrds_ice>
	    <nthrds_ocn>1</nthrds_ocn>
	    <nthrds_glc>1</nthrds_glc>
	    <nthrds_wav>1</nthrds_wav>
	    <nthrds_cpl>1</nthrds_cpl>
	  </nthrds>
	</pes>
      </mach>
    </grid>
    <grid name="a%ne30np4.pg3_l%ne30np4.pg3_oi%tx2_3v2">
      <mach name="any">
        <pes pesize="M" compset="CAM.*%MT.*MOM6">
          <CAM_CONFIG_OPTS append="True">'-pcols 9'</CAM_CONFIG_OPTS>
        </pes>
        <pes pesize="XL" compset="CAM.*%LT.*MOM6">
          <CAM_CONFIG_OPTS append="True">'-pcols 9'</CAM_CONFIG_OPTS>
        </pes>
      </mach>
    </grid>
  </overrides>
</config_pes>
