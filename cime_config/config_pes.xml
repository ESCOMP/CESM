<?xml version="1.0"?>

<config_pes version="2.0">

  <grid name="any">
    <mach name="any">
      <pes pesize="any" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>-3</ntasks_atm>
	  <ntasks_lnd>-1</ntasks_lnd>
	  <ntasks_rof>-1</ntasks_rof>
	  <ntasks_ice>-2</ntasks_ice>
	  <ntasks_ocn>-1</ntasks_ocn>
	  <ntasks_glc>-1</ntasks_glc>
	  <ntasks_wav>-1</ntasks_wav>
	  <ntasks_cpl>-3</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_glc>1</nthrds_glc>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>-1</rootpe_ice>
	  <rootpe_ocn>-3</rootpe_ocn>
	  <rootpe_glc>0</rootpe_glc>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	</rootpe>
      </pes>
    </mach>
  </grid>

  <grid name="a%ne120np4.+l%ne120np4.+oi%tx0.1v2">
    <mach name="cori-knl">
      <pes pesize="L" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>40960</ntasks_atm>
	  <ntasks_lnd>640</ntasks_lnd>
	  <ntasks_rof>640</ntasks_rof>
	  <ntasks_ice>40320</ntasks_ice>
	  <ntasks_ocn>19460</ntasks_ocn>
	  <ntasks_glc>1</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>40960</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	  <nthrds_glc>1</nthrds_glc>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>640</rootpe_ice>
	  <rootpe_ocn>40960</rootpe_ocn>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	  <rootpe_glc>0</rootpe_glc>
	</rootpe>
      </pes>
    </mach>
    <mach name="stampede2-skx">
      <pes pesize="M" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>14400</ntasks_atm>
	  <ntasks_lnd>480</ntasks_lnd>
	  <ntasks_rof>480</ntasks_rof>
	  <ntasks_ice>13920</ntasks_ice>
	  <ntasks_ocn>4790</ntasks_ocn>
	  <ntasks_glc>1</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>14400</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	  <nthrds_glc>1</nthrds_glc>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>480</rootpe_ice>
	  <rootpe_ocn>14400</rootpe_ocn>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	  <rootpe_glc>0</rootpe_glc>
	</rootpe>
      </pes>
      <pes pesize="L" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>28800</ntasks_atm>
	  <ntasks_lnd>576</ntasks_lnd>
	  <ntasks_rof>576</ntasks_rof>
	  <ntasks_ice>28224</ntasks_ice>
	  <ntasks_ocn>11036</ntasks_ocn>
	  <ntasks_glc>1</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>28800</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	  <nthrds_glc>1</nthrds_glc>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>576</rootpe_ice>
	  <rootpe_ocn>28800</rootpe_ocn>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	  <rootpe_glc>0</rootpe_glc>
	</rootpe>
      </pes>
    </mach>
    <mach name="grace">
      <pes pesize="M" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>4320</ntasks_atm>
	  <ntasks_lnd>384</ntasks_lnd>
	  <ntasks_rof>384</ntasks_rof>
	  <ntasks_ice>3936</ntasks_ice>
	  <ntasks_ocn>1788</ntasks_ocn>
	  <ntasks_glc>36</ntasks_glc>
	  <ntasks_wav>36</ntasks_wav>
	  <ntasks_cpl>4320</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	  <nthrds_glc>1</nthrds_glc>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>384</rootpe_ice>
	  <rootpe_ocn>4320</rootpe_ocn>
	  <rootpe_wav>6108</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	  <rootpe_glc>6108</rootpe_glc>
	</rootpe>
      </pes>
      <pes pesize="L" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>13872</ntasks_atm>
	  <ntasks_lnd>480</ntasks_lnd>
	  <ntasks_rof>480</ntasks_rof>
	  <ntasks_ice>13392</ntasks_ice>
	  <ntasks_ocn>5328</ntasks_ocn>
	  <ntasks_glc>1</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>13872</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	  <nthrds_glc>1</nthrds_glc>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>480</rootpe_ice>
	  <rootpe_ocn>13872</rootpe_ocn>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	  <rootpe_glc>0</rootpe_glc>
	</rootpe>
      </pes>
      <pes pesize="X1" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>26304</ntasks_atm>
	  <ntasks_lnd>768</ntasks_lnd>
	  <ntasks_rof>768</ntasks_rof>
	  <ntasks_ice>25536</ntasks_ice>
	  <ntasks_ocn>12096</ntasks_ocn>
	  <ntasks_glc>1</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>26304</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	  <nthrds_glc>1</nthrds_glc>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>768</rootpe_ice>
	  <rootpe_ocn>26304</rootpe_ocn>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	  <rootpe_glc>0</rootpe_glc>
	</rootpe>
      </pes>
    </mach>
    <mach name="frontera">
      <pes pesize="L" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>28800</ntasks_atm>
	  <ntasks_lnd>896</ntasks_lnd>
	  <ntasks_rof>896</ntasks_rof>
	  <ntasks_ice>27944</ntasks_ice>
	  <ntasks_ocn>16295</ntasks_ocn>
	  <ntasks_glc>1</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>28840</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	  <nthrds_glc>1</nthrds_glc>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>896</rootpe_ice>
	  <rootpe_ocn>28840</rootpe_ocn>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	  <rootpe_glc>0</rootpe_glc>
	</rootpe>
      </pes>
      <pes pesize="M" compset="any">
	<comment>none</comment>
	<ntasks>
	  <ntasks_atm>21600</ntasks_atm>
	  <ntasks_lnd>672</ntasks_lnd>
	  <ntasks_rof>672</ntasks_rof>
	  <ntasks_ice>20944</ntasks_ice>
	  <ntasks_ocn>13664</ntasks_ocn>
	  <ntasks_glc>1</ntasks_glc>
	  <ntasks_wav>1</ntasks_wav>
	  <ntasks_cpl>21616</ntasks_cpl>
	</ntasks>
	<nthrds>
	  <nthrds_atm>1</nthrds_atm>
	  <nthrds_lnd>1</nthrds_lnd>
	  <nthrds_rof>1</nthrds_rof>
	  <nthrds_ice>1</nthrds_ice>
	  <nthrds_ocn>1</nthrds_ocn>
	  <nthrds_wav>1</nthrds_wav>
	  <nthrds_cpl>1</nthrds_cpl>
	  <nthrds_glc>1</nthrds_glc>
	</nthrds>
	<rootpe>
	  <rootpe_atm>0</rootpe_atm>
	  <rootpe_lnd>0</rootpe_lnd>
	  <rootpe_rof>0</rootpe_rof>
	  <rootpe_ice>672</rootpe_ice>
	  <rootpe_ocn>21616</rootpe_ocn>
	  <rootpe_wav>0</rootpe_wav>
	  <rootpe_cpl>0</rootpe_cpl>
	  <rootpe_glc>0</rootpe_glc>
	</rootpe>
      </pes>
    </mach>
  </grid>

  <!-- J compset (all active except data atmosphere)
       Laid out as follows:
       |LND|ICE|ATM|OCN|
       |ROF|
       |..CPL..|
       |......GLC......|
  -->
  <!-- Ideally, we wouldn't specify the atmosphere resolution here, because it
       is irrelevant. However, ConfigPES doesn't seem to match the grid properly
       unless the atmosphere resolution is specified. -->
  <overrides>
    <grid name="any" >
      <mach name="any" >
        <pes pesize="any" compset="SPCAM[SM]">
          <nthrds>
            <nthrds_atm>1</nthrds_atm>
            <nthrds_lnd>1</nthrds_lnd>
            <nthrds_rof>1</nthrds_rof>
            <nthrds_ice>1</nthrds_ice>
            <nthrds_ocn>1</nthrds_ocn>
            <nthrds_glc>1</nthrds_glc>
            <nthrds_wav>1</nthrds_wav>
            <nthrds_cpl>1</nthrds_cpl>
          </nthrds>
        </pes>
        <pes pesize="any" compset="CISM1">
          <ntasks>
            <ntasks_glc>1</ntasks_glc>
          </ntasks>
          <nthrds>
            <nthrds_glc>1</nthrds_glc>
          </nthrds>
        </pes>
      </mach>
    </grid>
  </overrides>
</config_pes>
