<?xml version="1.0"?>
<testlist version="2.0">
  <test name="ERS" grid="ne30pg3_t232" compset="1850_CAM60_CLM50%BGC-CROP_CICE_MOM6_MOSART_DGLC%NOEVOLVE_SWAV" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 01:00:00 </option>
    </options>
  </test>
  <test name="ERS_Ld5" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 01:00:00 </option>
    </options>
  </test>
  <test name="ERS_Ld5" grid="ne30pg3_t232" compset="BLTHIST" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 01:00:00 </option>
    </options>
  </test>
  <test name="ERR_Ld5" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="gnu" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 01:00:00 </option>
    </options>
  </test>
  <test name="ERS_Ld5" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/decstart">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 01:00:00 </option>
    </options>
  </test>
  <test name="ERS_Ld5" grid="ne30pg3_t232" compset="BLTHIST" testmods="allactive/decstart">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 01:00:00 </option>
    </options>
  </test>

  <test name="ERI" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 02:00:00 </option>
    </options>
  </test>
  <test name="SMS_Ld2" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="aux_cime_baselines"/>
      <machine name="derecho" compiler="gnu" category="prealpha"/>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>
  <test name="SMS_Ld2" grid="ne30pg3_t232" compset="BMT1850" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="gnu" category="prealpha"/>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>

  <test name="SMS_Ld2_D" grid="ne30pg3_t232" compset="B1850C_MTt4s" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>

  <test name="SMS_Ld2_D" grid="ne30pg3_t232" compset="BHISTC_MTt4s" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>

  <test name="SMS_Ld2" grid="ne30pg3_t232" compset="B1850C_MTso" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>

  <test name="SMS_Ld2" grid="ne30pg3_t232" compset="BHISTC_MTso" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>
<!-- These are not defined in config_compsets.xml
  <test name="SMS_Ld2" grid="ne30pg3_t232" compset="B1850C_HTs1" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>
  <test name="SMS_Ld2" grid="ne30pg3_t232" compset="BHISTC_HTs1" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>
-->
  <test name="SMS_Ld2" grid="ne30pg3_t232" compset="B1850C_LTso" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>

  <test name="SMS_Ld2" grid="ne30pg3_t232" compset="BHISTC_LTso" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="github"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>


  
  <!-- MCC tests do not work because FMS fails at initialization of MOM -->
  <test name="MCC" grid="ne30pg3_t232" compset="BMT1850" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 02:00:00 </option>
    </options>
  </test>
  <test name="ERS_Ld5" grid="f09_t232" compset="E1850TEST" testmods="cice/default">
    <machines>
      <machine name="derecho" compiler="intel" category="prebeta"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>
  <test name="ERS_Ld7" grid="ne30pg3_t232" compset="B1850C_LSC" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho"   compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
    </options>
  </test>
  <!-- PET tests do not work because of issues with openmp in the se dycore -->
  <test name="PET_PM" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/defaultiomi">
    <machines>
      <machine name="derecho" compiler="gnu" category="prealpha"/>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 01:30:00 </option>
    </options>
  </test>
  <test name="PFS" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
      <machine name="derecho" compiler="gnu"   category="prealpha"/>
      <machine name="derecho" compiler="intel" category="prebeta"/>
    </machines>
    <options>
      <option name="wallclock"> 00:40:00 </option>
    </options>
  </test>
  <test name="PFS" grid="ne30pg3_t232" compset="BMT1850" testmods="allactive/maxthroughputb">
    <machines>
      <machine name="derecho" compiler="intel" category="aux_perf"/>
    </machines>
    <options>
      <option name="wallclock"> 00:40:00 </option>
    </options>
  </test>
  <test compset="FW1850" grid="f09_f09_mt232" name="PFS" testmods="allactive/maxthroughputfw">
    <machines>
      <machine name="derecho" compiler="intel" category="aux_perf"/>
    </machines>
  </test>
  <test name="ERI" grid="ne30pg3_t232" compset="BLT1850_MARBL" testmods="allactive/defaultio">
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
    </machines>
    <options>
      <option name="wallclock"> 03:00:00 </option>
    </options>
  </test>

  <test name="ERS_D_Ld3" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/defaultio">
   <machines>
     <machine name="derecho" compiler="intel" category="prealpha"/>
   </machines>
   <options>
     <option name="wallclock"> 02:00:00 </option>
     <option name="comment">Include a debug B compset exact restart test.</option>
   </options>
 </test>
 <test name="SMS_D_Ld1" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/aoflux_ogrid">
   <machines>
     <machine name="derecho" compiler="intel" category="prebeta"/>
   </machines>
   <options>
     <option name="wallclock"> 00:30:00 </option>
     <option name="comment">Include a short debug test using the ocn grid for aoflux calculations rather than the default xgrid.</option>
   </options>
 </test>
 <test name="SMS_D_Ld1" grid="ne30pg3_t232" compset="BLT1850" testmods="allactive/aoflux_agrid">
   <machines>
     <machine name="derecho" compiler="intel" category="prebeta"/>
   </machines>
   <options>
     <option name="wallclock"> 00:30:00 </option>
     <option name="comment">Include a short debug test using the atm grid for aoflux calculations rather than the default xgrid.</option>
   </options>
 </test>

  <!-- ew_pr Tests to run for the EW PR process -->
  <!-- ew_pr_gpu to be run with the other ew_pr tests, CPU+GPU -->
  <test name="SMS_P1" grid="mpasa480_mpasa480" compset="FKESSLER" testmods="ew/gpu_default">
    <machines>
      <machine name="derecho" compiler="nvhpc" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="ew_pr_gpu"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
      <option name="comment">Test GPU with (MPAS) dycore-only, simple physics</option>
    </options>
  </test>
  <test name="ERS_Ln9" grid="ne30pg3_ne30pg3_mg17" compset="F2000dev" testmods="cam/outfrq9s_gpu_default">
    <machines>
      <!-- Similar tests are already in CAM's prealpha category -->
      <machine name="derecho" compiler="nvhpc" category="ew_pr_gpu"/>
    </machines>
    <options>
      <option name="wallclock"> 00:30:00 </option>
      <option name="comment">Test all GPU physics enabled with SE-dycore, no GPU dycore. Matches test in aux_cam</option>
    </options>
  </test>
  <!-- Uncomment this test to add it back once the MPAS-O GPU port is solid -->
  <!-- <test name="SMS_Ln9_P4" compset="CMPASO" grid="mpasa120_oQU120" testmods="mpaso/gpu_default">
    <machines>
      <machine name="derecho" compiler="nvhpc" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="ew_pr_gpu"/>
    </machines>
    <options>
      <option name="wallclock">00:30:00</option>
      <option name="comment">Data-forced MPAS-Ocean running on GPUs. Also uses the 'split_implicit' integration option.</option>
    </options>
  </test> -->
  <!-- Uncomment the next test once the MPAS-O and MPAS-A GPU ports are both solid
       2025 July 25: The MPAS-O port needs some help and has the NVIDIA version of the OpenACC port coming soon
                     The MPAS-A port seemed to have issues with real-physics cases. -->
  <!-- <test name="ERS_Ln9" compset="B2000devEW" grid="mpasa120_oQU120" testmods="ew/outfrq9s_gpu_default">
    <machines>
      <machine name="derecho" compiler="nvhpc" category="prebeta"/>
      <machine name="derecho" compiler="nvhpc" category="ew_pr_gpu"/>
    </machines>
    <options>
      <option name="wallclock">00:30:00</option>
      <option name="comment">EarthWorks compset on GPUs with active cam using cam7 physics and mpasa dycore, clm, mpaso, and mpassi.</option>
    </options>
  </test> -->

  <!-- ew_pr CPU-only Tests -->
  <test name="ERS2_Ln9" grid="mpasa120_oQU120" compset="B2000devEW" testmods="ew/outfrq9s" >
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="ew_pr"/>
      <machine name="derecho" compiler="intel" category="ew_pr"/>
      <machine name="derecho" compiler="gnu"   category="ew_pr"/>
    </machines>
    <options>
      <option name="wallclock"> 02:00:00 </option>
      <option name="comment">EarthWorks compset with active cam using cam7 physics and mpasa dycore, clm, mpaso, and mpassi.</option>
    </options>
  </test>
  <test name="SMS" grid="mpasa480_oQU480" compset="F2000devEW" >
    <machines>
      <machine name="derecho" compiler="nvhpc" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="ew_pr"/>
    </machines>
    <options>
      <option name="wallclock"> 00:20:00 </option>
      <option name="comment">Use MPASSI%PRES instead of CICE%PRES in F2000dev (from CAM).</option>
    </options>
  </test>
  <test name="ERS_Ln9" grid="mpasa120_mpasa120" compset="QPC7" testmods="cam/outfrq9s_mpasa120" >
    <machines>
      <!-- Similar tests are already in CAM's prealpha category -->
      <machine name="derecho" compiler="nvhpc" category="ew_pr"/>
    </machines>
    <options>
      <option name="wallclock"> 00:20:00 </option>
      <option name="comment">Similar to test in CAM that uses Intel compiler and DEBUG. Helps check MPAS-A dycore.</option>
    </options>
  </test>
  <test name="ERS2" grid="mpasa480_mpasa480" compset="FKESSLER" >
    <machines>
      <machine name="derecho" compiler="nvhpc" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="ew_pr"/>
    </machines>
    <options>
      <option name="wallclock"> 00:20:00 </option>
      <option name="comment">Check MPAS-A dycore with simple physics. Match a GPU test.</option>
    </options>
  </test>
  <test name="ERP_Ln9_P128" grid="mpasa120z32_mpasa120" compset="FHS94" testmods="cam/outfrq9s_mpasa120" >
    <machines>
      <!-- Similar tests are already in CAM's prealpha category -->
      <machine name="derecho" compiler="nvhpc" category="ew_pr"/>
      <machine name="derecho" compiler="intel" category="ew_pr"/>
      <machine name="derecho" compiler="gnu"   category="ew_pr"/>
    </machines>
    <options>
      <option name="wallclock"> 00:20:00 </option>
      <option name="comment">Atmosphere-only test with Held Suarez simple physics.</option>
    </options>
  </test>
  <test name="ERS2_D" compset="CMPASO" grid="mpasa480_oQU480" >
    <machines>
      <machine name="derecho" compiler="intel" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="ew_pr"/>
      <machine name="derecho" compiler="intel" category="ew_pr"/>
      <machine name="derecho" compiler="gnu" category="ew_pr"/>
    </machines>
    <options>
      <option name="wallclock">00:20:00</option>
      <option name="comment">Data-forced MPAS-Ocean. Check restarts and debug at low resolution.</option>
    </options>
  </test>
  <test name="SMS_Ln9_P4" compset="CMPASO" grid="mpasa120_oQU120" testmods="mpaso/split_implicit" >
    <machines>
      <machine name="derecho" compiler="nvhpc" category="prealpha"/>
      <machine name="derecho" compiler="intel" category="prealpha"/>
      <machine name="derecho" compiler="nvhpc" category="ew_pr"/>
      <machine name="derecho" compiler="intel" category="ew_pr"/>
    </machines>
    <options>
      <option name="wallclock">00:20:00</option>
      <option name="comment">Data-forced MPAS-Ocean. Matches a GPU test. Also uses the 'split_implicit' integration option.</option>
    </options>
  </test>

</testlist>
